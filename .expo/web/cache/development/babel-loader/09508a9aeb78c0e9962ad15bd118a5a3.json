{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/rgoren/Desktop/personal/Mole-next-2/src/screens/GamesWon.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { Box } from 'react-native-design-utility';\nimport NetworkHeader from \"../common/NetworkHeader\";\nimport firebase from 'firebase';\nimport { Button, Icon, List, ListItem as ListBase, Left, Body, Right } from 'native-base';\nimport { Avatar, ListItem } from 'react-native-elements';\nimport WikiLoader from \"../common/WikiLoader\";\nimport Dialog, { DialogTitle, DialogFooter, DialogButton, DialogContent } from 'react-native-popup-dialog';\nimport { images } from \"../constant/images\";\nvar gamesToShow = [];\nvar STATE = {\n  REMOVE: 0,\n  OPEN: 1,\n  JOIN: 2,\n  START: 3,\n  NEXTCreator: 4,\n  NEXTJoiner: 5,\n  WINCreator: 6,\n  WINJoiner: 7\n};\nvar categories = [{\n  name: 'NBA',\n  image: images.nbaLogo\n}, {\n  name: 'GENERAL KNOWLEDGE',\n  image: images.generalKnowledgeLogo\n}, {\n  name: 'MUSIC',\n  image: images.musicLogo\n}, {\n  name: 'POLITICS',\n  image: images.politicsLogo\n}, {\n  name: 'CELEBRITY',\n  image: images.celebrityLogo\n}, {\n  name: 'FILMS',\n  image: images.filmLogo\n}];\n\nvar GamesWon = function (_React$Component) {\n  _inherits(GamesWon, _React$Component);\n\n  var _super = _createSuper(GamesWon);\n\n  function GamesWon() {\n    var _this;\n\n    _classCallCheck(this, GamesWon);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      isReady: false,\n      isGames: false,\n      games: [],\n      path: [],\n      pathVisible: false\n    };\n\n    _this.showPath = function (game) {\n      _this.setState({\n        path: game.data.pathWon,\n        pathVisible: true\n      });\n    };\n\n    _this.cancelInfo = function () {\n      _this.setState({\n        pathVisible: false\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(GamesWon, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.setState({\n        games: [],\n        isReady: false,\n        isDeleted: false,\n        pathVisible: false\n      }, function () {\n        gamesToShow = [];\n        categories.forEach(function (category) {\n          var ref = firebase.database().ref(\"/theMole\" + category.name);\n          var openGames = ref.orderByChild(\"state\").equalTo(STATE.WINCreator);\n          openGames.on(\"child_added\", function (snapshot, key) {\n            var data = snapshot.val();\n            console.log(data);\n\n            if (data.creator.uid == firebase.auth().currentUser.uid) {\n              game = {\n                key: snapshot.key,\n                data: data,\n                image: category.image,\n                categoryName: category.name\n              };\n              gamesToShow.push(game);\n\n              _this2.setState({\n                isGames: true,\n                games: [].concat(_toConsumableArray(_this2.state.games), [game])\n              });\n            }\n          });\n        });\n        categories.forEach(function (category) {\n          var ref = firebase.database().ref(\"/theMole\" + category.name);\n          var openGames = ref.orderByChild(\"state\").equalTo(STATE.WINJoiner);\n          openGames.on(\"child_added\", function (snapshot, key) {\n            var data = snapshot.val();\n            console.log(data);\n\n            if (data.joiner.uid == firebase.auth().currentUser.uid) {\n              console.log(data);\n              game = {\n                key: snapshot.key,\n                data: data,\n                image: category.image,\n                categoryName: category.name\n              };\n              gamesToShow.push(game);\n\n              _this2.setState({\n                isGames: true,\n                games: [].concat(_toConsumableArray(_this2.state.games), [game])\n              });\n            }\n          });\n        });\n      });\n      setInterval(function () {\n        if (!_this2.state.isReady) {\n          _this2.setState({\n            isReady: true\n          });\n        }\n      }, 5000);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (!this.state.isReady) {\n        return React.createElement(Box, {\n          f: 1,\n          center: true,\n          bg: \"white\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }\n        }, React.createElement(WikiLoader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 17\n          }\n        }));\n      } else if (this.state.games.length !== 0) {\n        return React.createElement(View, {\n          flex: 1,\n          style: {\n            margin: \"5%\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 13\n          }\n        }, React.createElement(Dialog, {\n          width: 0.9,\n          height: 400,\n          visible: this.state.pathVisible,\n          dialogTitle: React.createElement(DialogTitle, {\n            title: \"Path to victory\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 34\n            }\n          }),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }\n        }, React.createElement(DialogContent, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 21\n          }\n        }, React.createElement(ScrollView, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 25\n          }\n        }, this.state.path.map(function (item, index) {\n          return React.createElement(List, {\n            key: index,\n            style: {\n              marginBottom: 10\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 29\n            }\n          }, React.createElement(ListBase, {\n            avatar: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 37\n            }\n          }, React.createElement(Body, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 37\n            }\n          }, React.createElement(Text, {\n            style: {\n              fontSize: 17\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 41\n            }\n          }, item), React.createElement(Text, {\n            note: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 41\n            }\n          })), React.createElement(Right, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 37\n            }\n          }, React.createElement(Text, {\n            note: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 41\n            }\n          }))));\n        }), React.createElement(DialogButton, {\n          text: \"OK\",\n          onPress: function onPress() {\n            _this3.cancelInfo();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 29\n          }\n        })))), React.createElement(Text, {\n          style: {\n            fontSize: 20,\n            fontWeight: 'bold',\n            textAlign: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }\n        }, \"Games Won\"), React.createElement(ScrollView, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }\n        }, React.createElement(View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 17\n          }\n        }, this.state.games.map(function (l, i) {\n          return React.createElement(ListItem, {\n            onPress: function onPress() {\n              _this3.showPath(l);\n            },\n            key: i,\n            leftAvatar: React.createElement(Avatar, {\n              source: l.image,\n              size: \"large\",\n              rounded: true,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 37\n              }\n            }),\n            subtitle: \"Show winning path\",\n            titleStyle: {\n              color: '#3A5173',\n              fontWeight: 'bold'\n            },\n            title: \"Category: \" + l.categoryName,\n            subtitleStyle: {\n              color: '#627365'\n            },\n            rightIcon: React.createElement(Icon, {\n              name: \"ios-analytics\",\n              style: {\n                fontSize: 25,\n                color: 'purple'\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 29\n              }\n            }),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 21\n            }\n          });\n        }))));\n      }\n\n      return React.createElement(Box, {\n        f: 1,\n        center: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 17\n        }\n      }, firebase.auth().currentUser.displayName, \" you didn't won yet...don't stop trying!\\uD83E\\uDD17\"));\n    }\n  }]);\n\n  return GamesWon;\n}(React.Component);\n\nGamesWon.navigationOptions = function (_ref) {\n  var navigation = _ref.navigation;\n  return {\n    headerTitle: React.createElement(Image, {\n      style: {\n        width: 90,\n        height: 50,\n        flex: 1\n      },\n      resizeMode: \"contain\",\n      source: images.logo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 13\n      }\n    }),\n    headerBackground: React.createElement(NetworkHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }\n    }),\n    headerTitleStyle: {\n      color: '#4D5F66',\n      fontSize: 23\n    },\n    headerRight: React.createElement(Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 19\n      }\n    }),\n    headerLeft: React.createElement(Button, {\n      onPress: function onPress() {\n        return navigation.navigate('ChooseAGame');\n      },\n      style: {\n        backgroundColor: \"transparent\",\n        elevation: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 11\n      }\n    }, React.createElement(Icon, {\n      style: {\n        color: \"#403773\",\n        fontSize: 32\n      },\n      name: \"ios-arrow-round-back\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }\n    }))\n  };\n};\n\nexport { GamesWon as default };","map":{"version":3,"sources":["/Users/rgoren/Desktop/personal/Mole-next-2/src/screens/GamesWon.js"],"names":["React","Box","NetworkHeader","firebase","Button","Icon","List","ListItem","ListBase","Left","Body","Right","Avatar","WikiLoader","Dialog","DialogTitle","DialogFooter","DialogButton","DialogContent","images","gamesToShow","STATE","REMOVE","OPEN","JOIN","START","NEXTCreator","NEXTJoiner","WINCreator","WINJoiner","categories","name","image","nbaLogo","generalKnowledgeLogo","musicLogo","politicsLogo","celebrityLogo","filmLogo","GamesWon","state","isReady","isGames","games","path","pathVisible","showPath","game","setState","data","pathWon","cancelInfo","isDeleted","forEach","category","ref","database","openGames","orderByChild","equalTo","on","snapshot","key","val","console","log","creator","uid","auth","currentUser","categoryName","push","joiner","setInterval","length","margin","map","item","index","marginBottom","fontSize","fontWeight","textAlign","l","i","color","displayName","Component","navigationOptions","navigation","headerTitle","width","height","flex","logo","headerBackground","headerTitleStyle","headerRight","headerLeft","navigate","backgroundColor","elevation"],"mappings":"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","sourcesContent":["\nimport React from \"react\";\nimport {Alert,Image,Text,View,ScrollView} from \"react-native\";\nimport {Box} from 'react-native-design-utility'\nimport NetworkHeader from '../common/NetworkHeader';\nimport firebase from 'firebase';\nimport {Button,Icon,List, ListItem as ListBase, Left, Body, Right} from 'native-base';\nimport { Avatar,ListItem} from 'react-native-elements'\nimport WikiLoader from '../common/WikiLoader';\nimport Dialog, {DialogTitle, DialogFooter, DialogButton, DialogContent } from 'react-native-popup-dialog';\n\nimport {images} from '../constant/images';\n\nlet gamesToShow = [];\nconst STATE = {\n    REMOVE:0,\n    OPEN:1,\n    JOIN:2,\n    START:3,\n    NEXTCreator:4,\n    NEXTJoiner:5,\n    WINCreator:6,\n    WINJoiner:7,\n}\n\nconst categories = [\n    { name: 'NBA',image:images.nbaLogo}, \n    { name: 'GENERAL KNOWLEDGE',image:images.generalKnowledgeLogo},\n    { name: 'MUSIC',image:images.musicLogo},\n    { name: 'POLITICS',image:images.politicsLogo},\n    { name: 'CELEBRITY',image:images.celebrityLogo},\n    { name: 'FILMS',image:images.filmLogo},\n  ];\n\nexport default class GamesWon extends React.Component{\n    state ={\n        isReady:false,\n        isGames:false,\n        games:[],\n        path:[],\n        pathVisible:false\n    }\n  static navigationOptions = ({ navigation }) =>{\n    return{\n        headerTitle: (\n            <Image style={{ width: 90, height: 50,flex:1 }} resizeMode='contain' source={images.logo}/>\n          ),\n      headerBackground: (\n        <NetworkHeader/>\n      ),\n      headerTitleStyle: { color: '#4D5F66',fontSize:23 },\n      headerRight:<Text></Text>,\n      headerLeft: \n        ( <Button\n            onPress={()=>navigation.navigate('ChooseAGame')}\n            style={{backgroundColor:\"transparent\",elevation:0}}>\n            <Icon style={{color:\"#403773\",fontSize:32}}  name=\"ios-arrow-round-back\" />\n        </Button>\n        ),\n        }\n    }\n    componentDidMount(){\n        this.setState({\n            games:[],\n            isReady:false,\n            isDeleted:false,\n            pathVisible:false\n        },()=>{\n        gamesToShow=[];\n        categories.forEach(category => {\n            const ref =  firebase.database().ref(\"/theMole\"+category.name);\n            const openGames = ref.orderByChild(\"state\").equalTo(STATE.WINCreator);\n            openGames.on(\"child_added\",(snapshot,key)=>{\n            const data = snapshot.val();\n            console.log(data);\n            //igonre other people games, show only ours. \n            if (data.creator.uid==firebase.auth().currentUser.uid) {\n                //push to an array\n                game = {\n                    key:snapshot.key,\n                    data,\n                    image:category.image,\n                    categoryName:category.name,\n                }\n                gamesToShow.push(game);\n                this.setState({\n                    isGames:true,\n                    games:[...this.state.games,game],\n                })\n                }\n            })\n        });\n        categories.forEach(category => {\n            const ref =  firebase.database().ref(\"/theMole\"+category.name);\n            const openGames = ref.orderByChild(\"state\").equalTo(STATE.WINJoiner);\n            openGames.on(\"child_added\",(snapshot,key)=>{\n            const data = snapshot.val();\n            console.log(data)\n            //igonre other people games, show only ours. \n            if (data.joiner.uid==firebase.auth().currentUser.uid) {\n                console.log(data);\n                //push to an array\n                game = {\n                    key:snapshot.key,\n                    data,\n                    image:category.image,\n                    categoryName:category.name,\n                }\n                gamesToShow.push(game);\n                this.setState({\n                    isGames:true,\n                    games:[...this.state.games,game],\n                })\n                }\n            })\n        });\n      })\n      setInterval(()=>{\n        if (!this.state.isReady) {\n          this.setState({\n            isReady:true\n          })\n        }\n      },5000)\n    }\n    showPath = (game)=>{\n       this.setState({\n           path:game.data.pathWon,\n           pathVisible:true\n       })       \n    }   \n    cancelInfo = ()=>{\n        this.setState({\n            pathVisible:false\n        })\n    }\n    render(){\n        if (!this.state.isReady) {\n            return(\n            <Box f={1} center bg=\"white\">\n                <WikiLoader/>\n            </Box>\n            )\n        }\n        else if(this.state.games.length!==0){\n            return(\n                \n            <View flex={1} style={{margin:\"5%\"}}>\n            <Dialog \n                    width={0.9}\n                    height={400}\n                    visible={this.state.pathVisible}\n                    dialogTitle={<DialogTitle title=\"Path to victory\" />}\n                    >\n                    <DialogContent>\n                        <ScrollView>\n\n                        {this.state.path.map((item,index)=>{\n                        return(\n                            <List key={index} style={{marginBottom: 10}}>\n                                    <ListBase avatar>\n                                    \n                                    {/* <Left>\n                                        <Thumbnail source={i} />\n                                    </Left> */}\n                                    <Body>\n                                        <Text style={{fontSize:17}}>{item}</Text>\n                                        <Text note></Text>\n                                    </Body>\n                                    <Right>\n                                        <Text note></Text>\n                                    </Right>\n                                    </ListBase>\n                            </List>\n                            )\n                                })\n                            }\n                            <DialogButton\n                            text=\"OK\"\n                            onPress={() => {this.cancelInfo()}}\n                            />         \n                        </ScrollView>     \n                    </DialogContent>\n            </Dialog>\n            <Text style={{fontSize:20,fontWeight:'bold',textAlign:'center'}}>Games Won</Text>\n            <ScrollView>\n                <View>\n                    {this.state.games.map((l, i) => (\n                    <ListItem\n                        onPress={()=>{this.showPath(l)}}  \n                        key={i}\n                        leftAvatar={<Avatar\n                            source={l.image}\n                            size=\"large\"\n                            rounded\n                        />}\n                        subtitle=\"Show winning path\"\n                        titleStyle={{color:'#3A5173',fontWeight:'bold'}}\n                        title={\"Category: \" +l.categoryName}\n                        subtitleStyle={{color:'#627365'}}\n                        rightIcon={\n                            <Icon \n                            name='ios-analytics'\n                            style={{fontSize: 25, color: 'purple'}}\n                            />\n                        }\n                    />\n                    ))\n                    }\n                </View>\n            </ScrollView>\n        </View>\n            )\n            }\n        return(\n            <Box f={1} center>\n                <Text>{firebase.auth().currentUser.displayName} you didn't won yet...don't stop trying!ðŸ¤—</Text>\n            </Box>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}